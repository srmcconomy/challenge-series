{"version":3,"sources":["server.jsx"],"names":["global","navigator","app","use","static","join","__dirname","jsFile","process","env","NODE_ENV","files","client","out","outFile","ports","webpack","req","res","content","renderToString","send","listen","express","console","log"],"mappings":";;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAEAA,OAAOC,SAAP,GAAmB,EAAEA,WAAW,KAAb,EAAnB;;AAEA,MAAMC,MAAM,wBAAZ;AACAA,IAAIC,GAAJ,CAAQ,UAAR,EAAoB,kBAAQC,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,iBAArB,CAAf,CAApB;;AAEA,IAAIC,MAAJ;AACA,IAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCH,WAAU,YAAU,iBAAOI,KAAP,CAAaC,MAAb,CAAoBC,GAAI,MAAG,iBAAOF,KAAP,CAAaC,MAAb,CAAoBE,OAAQ,GAA3E;AACD,CAFD,MAEO;AACLP,WAAU,qBAAmB,iBAAOQ,KAAP,CAAaC,OAAQ,MAAG,iBAAOL,KAAP,CAAaC,MAAb,CAAoBC,GAAI,MAAG,iBAAOF,KAAP,CAAaC,MAAb,CAAoBE,OAAQ,GAA5G;AACD;;AAEDZ,IAAIC,GAAJ,CAAQ,CAACc,GAAD,EAAMC,GAAN,KAAc;AACpB,QAAMC,UAAU,iBAAeC,cAAf,CAA8B,kDAA9B,CAAhB;AACAF,MAAIG,IAAJ,CACG;;;;;+BAAA,CAK0BF,OAAQ;mCAAA,CACJZ,MAAO;;YAPxC;AAWD,CAbD;;AAeAL,IAAIoB,MAAJ,CAAW,iBAAOP,KAAP,CAAaQ,OAAxB,EAAiC,MAAM;AACrCC,UAAQC,GAAR,CAAa,sBAAoB,iBAAOV,KAAP,CAAaQ,OAAQ,GAAtD;AACD,CAFD","file":"server.js","sourcesContent":["// @flow\n\nimport express from 'express';\nimport path from 'path';\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\n\nimport config from '../config';\nimport App from './components/App';\n\nglobal.navigator = { navigator: 'all' };\n\nconst app = express();\napp.use('/assets/', express.static(path.join(__dirname, '../build/static')));\n\nlet jsFile;\nif (process.env.NODE_ENV === 'production') {\n  jsFile = `/assets/${config.files.client.out}/${config.files.client.outFile}`;\n} else {\n  jsFile = `http://localhost:${config.ports.webpack}/${config.files.client.out}/${config.files.client.outFile}`;\n}\n\napp.use((req, res) => {\n  const content = ReactDOMServer.renderToString(<App />);\n  res.send(\n    `<html>\n      <head>\n        <link rel=\"stylesheet\" href=\"/assets/css/main.css\" />\n      </head>\n      <body>\n        <div id=\"react-root\">${content}</div>\n        <script async defer src=\"${jsFile}\"></script>\n      </body>\n    </html>`\n  );\n});\n\napp.listen(config.ports.express, () => {\n  console.log(`Listening on port ${config.ports.express}`);\n});\n"],"sourceRoot":"/source/"}